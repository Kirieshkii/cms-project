* JWT_SECRET (секретный ключ для всех токенов) хранится в ENV переменных или конфиге которого нет в git
* Пример payload-а токена:

| Claim | Type          | Description                                                                                                             |
| ----- | ------------- | ----------------------------------------------------------------------------------------------------------------------- |
| `sub` | string        | The user’s unique identifier (e.g., user ID in your database).                                                          |
| `iat` | number        | “Issued At” — Unix timestamp when the token was generated.                                                              |
| `exp` | number        | “Expiration Time” — Unix timestamp when the token becomes invalid (e.g., 1 hour after `iat`).                           |
| `jti` | string (UUID) | “JWT ID” — unique identifier for the token instance, useful for logging and revocation tracking.                        |
| `ver` | number        | Token version number; incremented when refresh tokens are rotated or when the user resets password or processes logout. |

## **Base URL**

`/api/v1/auth`

---
## **POST /login**
### **Description**
Authenticates the user with credentials and issues JWT tokens.
### **Request**
**Headers:**  
`Content-Type: application/json`

**Body Parameters:**

| Field      | Type   | Required | Description       |
| ---------- | ------ | -------- | ----------------- |
| `email`    | string | yes      | Registered email. |
| `password` | string | yes      | User password.    |

### **Responses**

| Code               | Description                     | Body                                                                        |
| ------------------ | ------------------------------- | --------------------------------------------------------------------------- |
| `200 OK`           | Authentication successful.      | `{ "access_token": "<jwt>", "refresh_token": "<jwt>", "expires_in": 3600 }` |
| `400 Bad Request`  | Missing or invalid credentials. | `{ "error": "Invalid credentials" }`                                        |
| `401 Unauthorized` | Incorrect email or password.    | `{ "error": "Unauthorized" }`                                               |

---

## **POST /refresh**

### **Description**
Refreshes an expired access token using a valid refresh token.
### **Request**

**Headers:**  
`Content-Type: application/json`

**Body Parameters:**

| Field           | Type   | Required | Description                                |
| --------------- | ------ | -------- | ------------------------------------------ |
| `refresh_token` | string | yes      | The valid refresh token previously issued. |

### **Responses**

| Code               | Description                       | Body                                                                        |
| ------------------ | --------------------------------- | --------------------------------------------------------------------------- |
| `200 OK`           | Tokens refreshed successfully.    | `{ "access_token": "<jwt>", "refresh_token": "<jwt>", "expires_in": 3600 }` |
| `401 Unauthorized` | Invalid or expired refresh token. | `{ "error": "Invalid refresh token" }`                                      |

---

## **POST /logout**

### **Description**

Revokes the user's refresh token, effectively logging them out.  
This endpoint should invalidate the stored refresh token or increment a version number for token invalidation.
### **Request**

**Headers:**
`Authorization: Bearer <access_token>`

**Body:** _(optional)_  
No body required unless supporting specific logout reasons.
### **Responses**

|Code|Description|Body|
|---|---|---|
|`204 No Content`|Logout successful.|_(no body)_|
|`401 Unauthorized`|Missing or invalid access token.|`{ "error": "Unauthorized" }`|

---

## **GET /profile**

### **Description**
Fetches authenticated user information from the access token.

### **Request**

**Headers:**
`Authorization: Bearer <access_token>`
**Body:**  
None
### **Responses**

|Code|Description|Body|
|---|---|---|
|`200 OK`|Returns user profile information.|`{ "id": 1, "username": "admin", "email": "admin@example.com", "role": "admin" }`|
|`401 Unauthorized`|Invalid or missing token.|`{ "error": "Unauthorized" }`|

---
## **Error Response Format**

All endpoints follow a unified error structure:


`{   "error": {     "code": "string",     "message": "string"   } }`

**Examples:**

- `{ "error": { "code": "invalid_token", "message": "The provided token is expired or invalid." } }`
    
- `{ "error": { "code": "forbidden", "message": "User does not have permission to perform this action." } }`    

---

## **Versioning**

- All authentication routes are prefixed with `/api/v1/` to support future schema evolution.
